<!doctype html>
<html lang="en">

<head>
  <title>document.bind trick</title>
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <h1>The document.bind trick</h1>
  <p>This is just a demo for plain javascript.</p>
  <p class="instruction">Add an item below.</p>

  <p class="status" style="display: none">There are now <span class="itemCount"></span> items.</p>

  <ul id="todoList"></ul>

  <form action="/" id="itemForm">
    <fieldset>
      <label>Item: <input type="text" name="itemName" required></label>
      <input type="submit" value="Add value">
    </fieldset>
  </form>

</body>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const $ = document.querySelector.bind(document);
    const $$ = document.querySelectorAll.bind(document);
    const el = document.createElement.bind(document);

    $('form#itemForm').addEventListener('submit', e => {
      e.preventDefault();
      $('#todoList').appendChild(el('li')).textContent = e.target.itemName.value;
      $('p.status').style.display = 'block';
      $('p.status span').textContent = $$('li').length;
      e.target.itemName.value = '';
    });
  });
</script>
</html>
