<!doctype html>
<html lang="en">

<head>
  <title>document.bind trick</title>
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <h1>The document.bind trick</h1>
  <p>This is just a demo for plain javascript.</p>
  <p class="instruction">Add an item below.</p>

  <p class="status" style="display: none">There are now <span class="itemCount"></span> items.</p>

  <ul id="todoList"></ul>

  <form action="/" id="itemForm">
    <fieldset>
      <label>Item: <input type="text" name="itemName" required></label>
      <input type="submit" value="Add value">
    </fieldset>
  </form>

</body>
<script>
  document.addEventListener('DOMContentLoaded', () => {

    const form = document.querySelector('form#itemForm');
    const statusEl = document.querySelector('p.status');

    form.addEventListener('submit', e => {
      e.preventDefault();
      const val = e.target.itemName.value;

      const ulTodoList = document.querySelector('#todoList');
      const li = document.createElement('li');
      li.textContent = val;
      ulTodoList.appendChild(li);

      statusEl.style.display = 'block';

      const allItems = document.querySelectorAll('li');
      document.querySelector('p.status span').textContent = allItems.length;

      e.target.itemName.value = '';

    });
  });
</script>
</html>
